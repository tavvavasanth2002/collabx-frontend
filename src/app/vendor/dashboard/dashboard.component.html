<div class="container py-5">
  <div class="row g-4 text-center ">
    <div class="col-6 col-md-3">
      <div class="project-card p-4 bg-light rounded shadow-sm position-relative hover-shadow">
        <a href="#" class="text-decoration-none">
          <i class="fa-solid fa-file text-primary" style="font-size: 4rem;"></i>
          <span class="position-absolute top-0 end-0 translate-middle badge rounded-pill bg-primary">
            {{undecided.length}}
          </span>
          <h6 class="mt-3 fw-semibold text-dark">Project Undecided</h6>
        </a>
      </div>
    </div>
    <div class="col-6 col-md-3">
      <div class="project-card p-4 bg-light rounded shadow-sm position-relative hover-shadow">
        <a href="#" class="text-decoration-none">
          <i class="fa-solid fa-file text-success" style="font-size: 4rem;"></i>
          <span class="position-absolute top-0 end-0 translate-middle badge rounded-pill bg-success">
            {{completed.length}}
          </span>
          <h6 class="mt-3 fw-semibold text-dark">Project Complete</h6>
        </a>
      </div>
    </div>
    <div class="col-6 col-md-3">
      <div class=" project-card p-4 bg-light rounded shadow-sm position-relative hover-shadow">
        <a href="#" class="text-decoration-none">
          <i class="fa-solid fa-file text-warning" style="font-size: 4rem;"></i>
          <span class="position-absolute top-0 end-0 translate-middle badge rounded-pill bg-warning text-dark">
            {{progress.length}}
          </span>
          <h6 class="mt-3 fw-semibold text-dark">Project Progress</h6>
        </a>
      </div>
    </div>
    <div class="col-6 col-md-3">
      <div class="project-card p-4 bg-light rounded shadow-sm position-relative hover-shadow">
        <a href="#" class="text-decoration-none">
          <i class="fa-solid fa-file text-danger" style="font-size: 4rem;"></i>
          <span class="position-absolute top-0 end-0 translate-middle badge rounded-pill bg-danger">
            {{reject.length}}
          </span>
          <h6 class="mt-3 fw-semibold text-dark">Project Rejected</h6>
        </a>
      </div>
    </div>
  </div>

  <div class="row mt-5 g-4">
    <div class="col-md-5">
      <div class="card border-1 shadow-sm h-100">
        <div class="card-header bg-white border-bottom">
          <h5 class="mb-0">Performance</h5>
        </div>
        <div class="card-body d-flex justify-content-center align-items-center" style="height: 400px;">
          <canvas baseChart [data]="pieChartData" [type]="pieChartType"></canvas>
        </div>
      </div>
    </div>
    <div class="col-md-7">
      <div class="card border-1 shadow-sm h-100">
        <div class="card-header bg-white border-bottom">
          <h5 class="text-center mb-0">Notifications</h5>
        </div>
        <div class="card-body p-0">
          <div class="list-group list-group-flush">
            <a *ngFor="let notify of notification" (click)="openModal(notify)" data-bs-toggle="modal"
              data-bs-target="#notificationModal"
              class="list-group-item list-group-item-action d-flex flex-column flex-md-row justify-content-between align-items-start gap-2 py-3 px-4 border-bottom">
              <div class="d-flex flex-column">
                <span class="fw-semibold text-dark">{{ notify.fromemail }}</span>
                <span class="text-muted small">{{ notify.projectName }}</span>
                <span class="text-body">{{ notify.issues || 'No message provided' }}</span>
              </div>
              <div class="text-end text-muted small">
                {{ notify.date }}
              </div>
            </a>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<div class="modal fade" id="notificationModal" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-dark text-white">
        <h5 class="modal-title" id="modalLabel">{{selectedNotification?.projectName}} â€“ Details</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p><strong>From:</strong> {{selectedNotification?.fromemail}}</p>
        <p><strong>To:</strong> {{selectedNotification?.toemail}}</p>
        <p><strong>Subject:</strong> {{selectedNotification?.subject}}</p>
        <p><strong>Priority:</strong> {{selectedNotification?.priorty}}</p>
        <p><strong>Tasks:</strong> {{selectedNotification?.tasks}}</p>
        <p><strong>Issues:</strong> {{selectedNotification?.issues}}</p>
        <p><strong>Message:</strong></p>
        <div class="border rounded p-2 bg-light">{{selectedNotification?.message}}</div>
        <p class="mt-3 text-muted"><strong>Date:</strong> {{selectedNotification?.date}}</p>
      </div>
      <div class="modal-footer">
        <a [routerLink]="['/users/reports', company]" class="btn btn-primary text-white text-decoration-none">Reply</a>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>

    </div>
  </div>
</div>